# Payday 프로젝트 기획서 (Project Planning Document)

## 📋 문서 개요
본 문서는 Payday 대부업 대출 관리 시스템의 전체 기획 내용을 담고 있으며, 프로젝트의 목적, 주요 기능, 사용자 흐름, 그리고 기대 효과를 상세히 설명합니다.

---

## 1. 프로젝트 개요

### 1.1 프로젝트명
**Payday (페이데이) - 대부업 통합 관리 시스템**

### 1.2 프로젝트 목적
대부업을 영위하는 기업에서 고객 관리, 계약 관리, 수납 관리, 채권 관리를 효율적으로 처리할 수 있는 웹 기반 통합 관리 시스템(CRM)을 구축하여 업무 효율성을 극대화하고 인적 오류를 최소화합니다.

### 1.3 타겟 사용자
- **주 사용자**: 대부업 회사의 관리자 및 실무 담당자
- **보조 사용자**: 경영진 (리포트 및 통계 조회)

### 1.4 핵심 가치
- ✅ **정확성**: 복잡한 이자 계산을 자동화하여 수기 오류 방지
- ✅ **효율성**: 모든 업무를 하나의 시스템에서 처리
- ✅ **투명성**: 모든 거래 내역이 데이터베이스에 기록되어 추적 가능
- ✅ **접근성**: 웹 기반으로 언제 어디서나 접근 가능

---

## 2. 주요 기능 요구사항

### 2.1 인트라넷 (대시보드)
**목적**: 하루 업무의 시작점이자 주요 정보를 한눈에 파악

#### 주요 기능
- 📊 **당일 통계**: 오늘 대출 실행액, 회수액, 연체 현황
- 📅 **캘린더**: 주요 일정 및 공휴일 표시
- 📢 **공지사항**: 사내 중요 공지 게시 및 조회
- 🔍 **빠른 조회**: 고객명/계약번호로 즉시 검색
- 🏢 **회사 정보**: 사업자등록번호, 대부업등록번호 등 기본 정보 표시

---

### 2.2 고객 관리 (Customer Management)

#### 2.2.1 고객 등록
- **개인 고객**: 이름, 주민등록번호, 연락처, 주소(등본/실제), 직장 정보
- **법인 고객**: 법인명, 사업자번호, 대표자명, 연락처, 소재지

#### 2.2.2 고객 조회 및 검색
- 이름, 연락처, 주민번호로 검색
- 고객 상세 페이지에서 **모든 대출 계약 히스토리** 조회
- 메모 관리 (고객별 특이사항 기록)

---

### 2.3 계약 관리 (Contract Management)

#### 2.3.1 대출 계약 생성
**입력 항목**:
- 📌 고객 선택 (기존 고객 또는 신규 등록)
- 💰 대출 금액 (원금)
- 📆 대출일 / 만기일
- 📅 약정일 (매월 납입일, 예: 매월 5일)
- 📈 정상 이자율 (연 %, 예: 19.8%)
- 📈 연체 이자율 (연 %, 예: 20.0%)
- 📋 상환 방식 (자유상환/만기일시상환 등)
- 📄 상품명 (주택담보대출, 신용대출 등)

#### 2.3.2 계약 조건 변경 이력 관리
- **상황**: 중도에 이자율이 변경되는 경우
- **기능**: 변경일, 변경 후 금리를 기록하여 **과거 금리도 정확히 추적**
- **효과**: 조건 변경 전후 이자 계산이 정확하게 분리됨

#### 2.3.3 계약 상태 관리
| 상태 | 설명 |
|------|------|
| **정상 (active)** | 대출 진행 중, 연체 없음 |
| **연체 (overdue)** | 약정일 경과, 미수 이자 발생 |
| **완납 (paid)** | 원금 전액 상환 완료 |
| **부실 (defaulted)** | 장기 연체 등으로 부실 처리 |

#### 2.3.4 서류 관리
- 계약서, 담보권 설정 서류 등 파일 업로드 및 다운로드
- 파일은 `uploads/contracts/` 폴더에 저장

---

### 2.4 수납 및 채권 관리 (Collection & Bond Management)

#### 2.4.1 수납 처리 프로세스
**입금 우선순위** (중요!):
1. **경비** (선취/중도비용): 먼저 차감
2. **이자** (미수이자 + 당일 발생이자): 그 다음 차감
3. **원금**: 남은 금액으로 원금 상환

**자동 분개 로직**:
- 예: 100만원 입금 시스템이 자동으로 경비 10만원, 이자 50만원, 원금 40만원으로 분개
- 각 항목별로 `collections` 테이블에 별도 행으로 저장

#### 2.4.2 이자 계산 로직
**핵심 공식**:
```
일일 이자 = 원금 × (연 이자율 ÷ 100) ÷ 연간일수(365 or 366)
```

**특징**:
- ✅ **윤년 자동 처리**: 2월 29일이 있는 해는 366일로 계산
- ✅ **영업일 기준**: 주말/공휴일 제외 (holidays 테이블 참조)
- ✅ **변동 금리 지원**: 중도에 금리 변경 시 구간별로 다른 금리 적용
- ✅ **연체 이자 별도 계산**: 약정일 이후는 연체 이자율 적용

#### 2.4.3 부족금(Shortfall) 관리
- **발생**: 수납액이 발생 이자보다 적을 경우
- **처리**: `contracts.shortfall_amount`에 누적 저장
- **우선 변제**: 다음 입금 시 이자보다 먼저 차감

#### 2.4.4 원장 관리
- **거래 원장 (Transaction Ledger)**: 입금별 상세 내역 조회
- **채권 원장 (Bond Ledger)**: 기수별 잔액 및 상태 조회
- **스냅샷**: 매일 자정 전체 계약의 잔액/연체일수를 스냅샷으로 저장

---

### 2.5 SMS 및 알림 (Notifications)

#### 2.5.1 SMS 발송
- **대량 발송**: 조건(연체일수, 약정일 등)에 맞는 고객에게 일괄 발송
- **템플릿 지원**: 미리 작성된 문구에 [고객명], [이자금액] 등 변수 자동 치환
- **예약 발송**: 특정 일시에 자동 발송 (선택 사항)
- **API 연동**: Wideshot SMS API 사용

#### 2.5.2 Slack 알림
- 주요 이벤트 (대출 실행, 대량 입금 등) 발생 시 Slack 채널로 알림 전송
- 관리자가 실시간으로 업무 현황 파악 가능

#### 2.5.3 발송 이력 관리
- 모든 SMS 발송 내역은 `sms_log` 테이블에 저장
- 발송 성공/실패 여부 및 결과 코드 기록

---

### 2.6 보고서 및 증명서 (Reports & Certificates)

#### 2.6.1 일일 업무 일지
- **내용**: 당일 신규 대출, 회수액, 연체 현황, 완납 건수 등
- **활용**: 일일 마감 및 경영진 보고용

#### 2.6.2 예상 이자 조회
- **기능**: 특정 미래 일자를 선택하면 그날까지의 예상 이자 산출
- **활용**: 고객 문의 대응 및 회수 계획 수립

#### 2.6.3 증명서 발급
**템플릿 기반 자동 생성**:
- 완납 증명서
- 잔액 증명서
- 채무 확인서
- 독촉장, 내용증명 등

**인쇄 최적화**: 브라우저 인쇄 기능으로 바로 출력 가능

---

### 2.7 시스템 설정 및 관리 (Settings)

#### 2.7.1 휴일 관리
- 이자 계산에서 제외할 공휴일 등록/삭제
- 예외 설정: 대체 공휴일, 특근일 등

#### 2.7.2 회사 정보 관리
- 회사명, 대표자명, 사업자등록번호
- 로고 이미지, 법인 직인 이미지 업로드
- 입금 계좌 정보 (이자 수취 계좌, 경비 수취 계좌)

#### 2.7.3 사용자(직원) 관리
- 관리자 계정 생성 및 권한 부여
- 권한 레벨: 일반, 관리자, 슈퍼관리자

---

## 3. 사용자 시나리오 (User Scenarios)

### 시나리오 1: 신규 대출 실행
1. **고객 등록**: '고객 관리' 메뉴에서 고객 정보 입력
2. **계약 생성**: '계약 관리'에서 대출 조건 입력 및 저장
3. **서류 업로드**: 계약서, 담보 서류 PDF 파일 첨부
4. **대출 실행**: 계약 상태가 '정상'으로 활성화됨

### 시나리오 2: 정기 이자 수납
1. **계약 선택**: 입금 들어온 계약 번호 선택
2. **발생 이자 확인**: 시스템이 자동으로 현재까지의 발생 이자 계산하여 표시
3. **입금 처리**: 입금액 입력하면 자동으로 경비/이자/원금 분개
4. **영수증 출력**: 즉시 입금 영수증 인쇄 가능

### 시나리오 3: 연체 관리
1. **연체 조회**: 약정일 경과한 계약 목록 자동 표시
2. **SMS 발송**: 연체 고객에게 일괄 독촉 문자 발송
3. **연체 이자 계산**: 약정일 이후부터 연체 이자율 자동 적용
4. **입금 시**: 연체 이자 + 정상 이자 + 원금 순으로 차감

### 시나리오 4: 완납 처리
1. **완납 금액 조회**: 원금 + 발생 이자 정확히 계산
2. **입금 처리**: 전액 수납
3. **상태 변경**: 시스템이 자동으로 '완납' 상태로 전환
4. **증명서 발급**: 완납 증명서 출력 및 교부

---

## 4. 기대 효과

### 4.1 업무 효율성 향상
- **시간 절감**: 수작업 계산 → 자동 계산으로 업무 시간 70% 단축
- **오류 감소**: 이자 계산 오류로 인한 고객 불만 제로화

### 4.2 체계적 채권 관리
- **투명한 이력 관리**: 모든 거래 내역이 DB에 영구 보존
- **실시간 현황 파악**: 언제든지 대출 잔액, 연체 현황 조회 가능
- **회수율 제고**: 연체 고객 자동 알림으로 회수율 향상

### 4.3 데이터 자산화
- **통계 분석**: 월별/분기별 대출/회수 추이 분석
- **의사결정 지원**: 데이터 기반의 경영 판단 가능
- **규제 대응**: 금융감독원 등 규제 기관 요구 자료 즉시 생성

### 4.4 접근성 및 확장성
- **원격 업무**: 웹 기반으로 재택근무 가능
- **모바일 대응**: 반응형 디자인으로 스마트폰에서도 조회 가능
- **확장 가능**: 향후 AI 분석, 자동화 기능 등 추가 용이

---

## 5. 성공 지표 (KPI)

| 지표 | 목표 |
|------|------|
| 이자 계산 정확도 | 100% (오차 0원) |
| 일일 업무 처리 시간 | 기존 대비 70% 단축 |
| 시스템 가동률 | 99.9% 이상 |
| 사용자 만족도 | 5점 만점에 4.5점 이상 |

---

## 6. 프로젝트 범위

### 6.1 포함 사항 (In Scope)
- ✅ 웹 기반 관리 시스템
- ✅ 고객/계약/수납/채권 관리
- ✅ 이자 자동 계산 (변동 금리 포함)
- ✅ SMS 발송 및 Slack 알림
- ✅ 보고서 및 증명서 발급
- ✅ 백업 및 복원 기능

### 6.2 제외 사항 (Out of Scope)
- ❌ 모바일 앱 (웹만 지원, 추후 고려 가능)
- ❌ 고객용 포털 (내부 관리자용만)
- ❌ 자동 신용평가 (외부 API 연동 없음)
- ❌ 블록체인 기반 계약 (미지원)

---

## 7. 결론

Payday 시스템은 대부업 업무의 핵심인 **정확한 이자 계산**과 **체계적인 채권 관리**를 자동화하여, 업무 효율을 극대화하고 고객 만족도를 높이는 것을 목표로 합니다. 본 기획서에 명시된 모든 기능을 구현함으로써, 대부업계의 디지털 전환을 선도하는 시스템이 될 것입니다.

---

**문서 버전**: 1.0  
**최종 수정일**: 2025-12-16  
**작성자**: Payday 프로젝트 팀
